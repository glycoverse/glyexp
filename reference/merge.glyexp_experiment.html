<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Merge two experiments — merge.glyexp_experiment • glyexp</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Merge two experiments — merge.glyexp_experiment"><meta name="description" content="Merges two experiment() objects into a single object.
Expression matrix:
Expression matrices are merged by matching variables.
For variables that are present in only one of the experiments,
the corresponding values in the expression matrix are set to NA.
Sample information:
Column names and column types must be identical (order does not matter).
No overlap is allowed for sample names.
Variable information:
Column names and column types must be identical (order does not matter).
Variable names are ignored.
The identity of variables is determined by all other columns in the variable information.
If row A in the first var_info is identical (order does not matter)
to row B in the second var_info,
they are considered the same variable.
Therefore, please make sure that each row has a unique combination of values (except for variable),
otherwise the function cannot determine which variable in x is identical to which variable in y.
To ensure uniqueness, you can use glyclean::aggregate().
Metadata:
Metadata is taken from the first experiment.
This is the only place where the order of x and y matters."><meta property="og:description" content="Merges two experiment() objects into a single object.
Expression matrix:
Expression matrices are merged by matching variables.
For variables that are present in only one of the experiments,
the corresponding values in the expression matrix are set to NA.
Sample information:
Column names and column types must be identical (order does not matter).
No overlap is allowed for sample names.
Variable information:
Column names and column types must be identical (order does not matter).
Variable names are ignored.
The identity of variables is determined by all other columns in the variable information.
If row A in the first var_info is identical (order does not matter)
to row B in the second var_info,
they are considered the same variable.
Therefore, please make sure that each row has a unique combination of values (except for variable),
otherwise the function cannot determine which variable in x is identical to which variable in y.
To ensure uniqueness, you can use glyclean::aggregate().
Metadata:
Metadata is taken from the first experiment.
This is the only place where the order of x and y matters."><meta property="og:image" content="https://glycoverse.github.io/glyexp/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">glyexp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/glyexp.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/dplyr-style-functions.html">dplyr-Style Functions: Data Harmony in Action</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Merge two experiments</h1>

      <div class="d-none name"><code>merge.glyexp_experiment.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Merges two <code><a href="experiment.html">experiment()</a></code> objects into a single object.</p>
<p><strong>Expression matrix:</strong>
Expression matrices are merged by matching variables.
For variables that are present in only one of the experiments,
the corresponding values in the expression matrix are set to <code>NA</code>.</p>
<p><strong>Sample information:</strong>
Column names and column types must be identical (order does not matter).
No overlap is allowed for sample names.</p>
<p><strong>Variable information:</strong>
Column names and column types must be identical (order does not matter).
Variable names are ignored.
The identity of variables is determined by all other columns in the variable information.
If row A in the first <code>var_info</code> is identical (order does not matter)
to row B in the second <code>var_info</code>,
they are considered the same variable.
Therefore, please make sure that each row has a unique combination of values (except for <code>variable</code>),
otherwise the function cannot determine which variable in <code>x</code> is identical to which variable in <code>y</code>.
To ensure uniqueness, you can use <code>glyclean::aggregate()</code>.</p>
<p><strong>Metadata:</strong>
Metadata is taken from the first experiment.
This is the only place where the order of <code>x</code> and <code>y</code> matters.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'glyexp_experiment'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x-y">x, y<a class="anchor" aria-label="anchor" href="#arg-x-y"></a></dt>
<dd><p><code><a href="experiment.html">experiment()</a></code> objects to merge</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Not used</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A new <code><a href="experiment.html">experiment()</a></code> object</p>
    </div>
    <div class="section level2">
    <h2 id="variable-matching">Variable matching<a class="anchor" aria-label="anchor" href="#variable-matching"></a></h2>
    <p>In the variable information tibble,
the <code>variable</code> column is just arbitrary unique identifier,
while the real identity of a variable is determined by all other columns.
For example, if the variable information tibble has the following columns:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>variable glycan_composition protein protein_site</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>V1       <span class="fu">Hex</span>(<span class="dv">2</span>)<span class="fu">HexNAc</span>(<span class="dv">1</span>)    P1      <span class="dv">2</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>V2       <span class="fu">Hex</span>(<span class="dv">2</span>)<span class="fu">HexNAc</span>(<span class="dv">1</span>)    P2      <span class="dv">3</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>V3       <span class="fu">Hex</span>(<span class="dv">2</span>)<span class="fu">HexNAc</span>(<span class="dv">2</span>)    P2      <span class="dv">3</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>V4       <span class="fu">Hex</span>(<span class="dv">2</span>)<span class="fu">HexNAc</span>(<span class="dv">2</span>)    P2      <span class="dv">3</span></span></code></pre><p></p></div>
<p>We know that V1, V2, and V3 are all different variables,
but V3 and V4 are the same variable (they have the same glycan composition, protein, and protein site).</p>
<p>During the merge, the function will use all columns in the variable information tibble
except for <code>variable</code> to match variables.
This means that if the combination of all other columns is not unique,
the function cannot determine the identity of the variables.</p>
<p>To ensure uniqueness, you can use <code>glyclean::aggregate()</code>,
which merges the expression levels of variables with the same identity.</p>
<p>After the merge, a new <code>variable</code> column is added to the variable information tibble,
and used as the rownames of the expression matrix.</p>
    </div>
    <div class="section level2">
    <h2 id="variable-and-sample-orders">Variable and sample orders<a class="anchor" aria-label="anchor" href="#variable-and-sample-orders"></a></h2>
    <p>The order of variables and samples in the merged experiment is deterministic.</p>
<p>For samples, as no overlapping is allowed for sample names,
the new sample names are the union of the sample names in <code>x</code> and <code>y</code>,
orders reserved.</p>
<p>For variables, the new variables are:</p><ol><li><p>First, all variables in <code>x</code>, with the same order as in <code>x</code>.</p></li>
<li><p>Then, all variables in <code>y</code> while not in <code>x</code>, with the same order as in <code>y</code>.</p></li>
</ol><p>Note that for variables, we refer to the identity of variables,
not the variable names in the <code>variable</code> column.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bin Fu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

